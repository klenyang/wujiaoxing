<!doctype html>
<html>
<head>
	<title>注册</title>
	<meta charset = "utf-8"/>
</head>
<link rel="stylesheet" type="text/css" href="../css/reset.css"/>

<link rel="stylesheet" type="text/css" href="../css/index.css"/>
<link rel="stylesheet" type="text/css" href="../css/common.css"/>

<style type="text/css">

</style>
<script type="text/javascript" src="../js/jquery-1.12.0.js"></script>

<script type="text/javascript">



</script>
<body>
	<div class="loginBox">
		<h1><a href="#"><img src="../img/logo.jpg"/></a></h1>
		<div class="step1">
			<h2><span id="triangle-topleft"></span><a href="#">手机注册</a><span id="triangle-topright"></span></h2>
		</div>
		<div class="step1_login">
		
			<div class="step1_login_left fl">
				<h2>第一步：填写手机账户信息（以下内容均为必填）</h2>
				<p style="margin-top:25px;"><span>用户名：</span><input class="userName" type="text"/></span><b>4-20个字符，一个汉字为两个字符，推荐使用中文会会员名字。一旦注册成功会员名将不能修改。</b></p>
				<i class="userNameR"></i>
				<p><span>手机号码：</span><input class="userNum" type="text"/></span><b>请输入您的手机号码。</b></p>
				<i class="userNumR"></i>
				<p><span>验证码：</span><input class="code" type="text"/></span><b class="codeBtn">换一组</b></p>
				<i class="userCodeR"></i>
				<a href="#" class="sendCode">发送激活码</a>
			</div>
			<div class="step2_login_left fl">
				<h2>第二步：填写获得的激活码</h2>
				<p style="margin-top:25px;"><span>用户名：</span><input class="userName" disabled="disabled" type="text"/></span></p>
				<i ></i>
				<p><span>手机号码：</span><input class="userNum" disabled="disabled" type="text"/></span><b></b></p>
				<i ></i>
				<p><span>登录密码：</span><input class="key1" type="password"/></span><b>6-16个字符，请使用字母加数字或下划线的组合密码。</b></p>
				<i class="password1"></i>
				<p><span>确认密码：</span><input class="key2" type="password"/></span><b>请再次输入登录密码。</b></p>
				<i class="password2"></i>
				<p><span>激活码：</span><input class="code" type="text"/></span><b>请输入您的激活码。</b></p>
				<i></i>
				<p><a href="#" class="sendMsg">同意以下协议并注册</a><b style="line-height:55px;">手机未收到验证码，<a href="#">重新发送</a></b></p>
				<a class="protocol" href="#">《邦购用户协议》</a>
			</div>
			<div class="step3_login_left fl">
				<h2>第二步：注册帐号成功</h2>
				<h3>恭喜您注册成功！</h3>
				<p>您登录邦购的用户名为：<span class="user">yc7714</span> ，您随时可使用此用户名享受便宜又放心的购物乐趣。</p>
				<a href="#" class="goBuy">立即去购物</a>
				<div class="safeMsg">
					<h4>请完成帐户安全验证</h4>
					<h5>验证手机和邮箱可保护您的账户安全，帮助您快速找回密码，并可接收订单处理等信息。</h5>
					<h5>
						<a class="checkmail" href="#">立刻去验证邮箱>></a>
						<a class="checkphone" href="#">立刻去验证手机>></a>
					</h5>
				</div>
			</div>
			<img class="fr" src="../img/loginpic.jpg"/>
			
		</div>
		<script type="text/javascript">
			$(function(){
				$userName=$('.userName');
				$userNameR=$('.userNameR');
				$userNum=$('.userNum');
				$userNumR=$('.userNumR');
				$codeBtn=$('.codeBtn');
				$code=$('.code');
				$userCodeR=$('.userCodeR');
				$('.userName').val('');
				$('.userNum').val('');
				$('.code').val('');
				//用户名验证
				$userName.bind('blur',function(){
					_inputName=$userName.val();
					var myreg=/^[a-zA-Z|\u4e00-\u9fa5]+[\u4e00-\u9fa5\w\d]+$/;
					
					if(_inputName=='' ||_inputName.length==0){
						$userNameR.text('用户名不能为空').css('color','#f00');
						return false;
					} 
					if(_inputName.length<4 ||_inputName.length>20){
						$userNameR.text('用户名只能为4~20个字符,一个汉字为两个字符').css('color','#f00');
						return false;
					}
					if(!myreg.test(_inputName)){
						$userNameR.text('用户名只以中、英文开头，与数字、下划线组成').css('color','#f00');
						return false;
					} 
					$userNameR.text('用户名可用').css('color','green');
				
				});
				//手机验证
				$userNum.bind('blur',function(){
					_inputNum=$userNum.val();
					var myreg=/^1[3|4|5|7|8|9][0-9]+\d{4,8}$/;
					
					if(_inputNum=='' ||_inputNum.length==0){
						$userNumR.text('手机号不能为空').css('color','#f00');
						return false;
					} 
					if(_inputNum.length!=11 || !myreg.test(_inputNum)){
						$userNumR.text('手机号码不合法！').css('color','#f00');
						return false;
					}
					
					$userNumR.text('手机号格式正确').css('color','green');
				});
				//验证码 4位数字和字母验证码
				$codeBtn.text(showCode());
				$codeBtn.on('click',function(){
					
					$codeBtn.text(showCode());
				})
				function showCode(){
					var let = new Array('a','b','c','d','e','f','g','h','i','g','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9');
					var index;;
					var str='';
					for(i=0;i<4;i++){
						index=parseInt(Math.random()*let.length)
						str+=let[index];
					}
					return str;
				};
				//验证码的判断
				$code.bind('blur',function(){
					//console.log()
					
					if($code.val()==$codeBtn.text()){
						$userCodeR.text('验证成功').css('color','green');
					
						
					}else{
						$userCodeR.text('您输入的验证码有误，请重新输入').css('color','red');
						return false;
					}
					
				});
				//点击发送验证后切换到第二步
				var $sendCode=$('.sendCode');
				var $step1_login_left=$('.step1_login_left');
				var $step2_login_left=$('.step2_login_left');
				 $sendCode.on('click',function(){
					if($userCodeR.text()=='验证成功' && $userNumR.text()=='手机号格式正确' && $userNumR.text()=='手机号格式正确'){
						 $step1_login_left.hide();	
						 $step2_login_left.show();	
						 $step2_login_left.find('.userName').val(_inputName);
						 $step2_login_left.find('.userNum').val(_inputNum);
					}
				 });
				 //密码验证
				var passReg=/^[0-9a-zA-Z_]{6,15}$/;
				$key1=$('.key1');
				$key2=$('.key2');
				$password1=$('.password1');
				$password2=$('.password2');
				$key1.bind('blur',function(){
					var _password1=$key1.val();
					if(_password1==''||_password1.length==0){
						$password1.text('密码不能为空').css('color','red');
						return false;
					}
					if(_password1.length<6||_password1.length>16){
						$password1.text('密码长度只能为6~16').css('color','red');
						return false;
					}
					if(!passReg.test(_password1)){
						$password1.text('6-16个字符，请使用字母加数字或下划线的组合密码。').css('color','red');
						return false;
					}
						$password1.text('√').css('color','green');
				});
				
				$key2.bind('blur',function(){
					var _password1=$key1.val();
					var _password2=$key2.val();
					if(_password1==_password2){
						$password2.text('√').css('color','green');
					}else{
						$password2.text('两次输入的密码不相同').css('color','red');
						return false;
					}
						
				});
				var $sendMsg=$('.sendMsg');
				var $step3_login_left=$('.step3_login_left');
				$sendMsg.on('click',function(){
					if($password1.text()=='√' && $password2.text()=='√'){
						$step2_login_left.hide();	
						$step3_login_left.show();
						$('.user').text(_inputName);	
						$('.step1').hide();
						$('.LI_bottom').hide();
						//注册保存cookie
						
						var name=$('.userName').val();
						var password=$('.key1').val();
						var obj=new Object();
						obj.name=name;
						obj.pass=password;
						var json=JSON.stringify(obj);
						
						//console.log(json);
						document.cookie=name+'='+json+';path=/';
						
	
					}
				})
				 
			});


		</script>	
	</div>
	<div class="LI_bottom">
		美特斯邦威集团网站：
		<a href="#">美特斯邦威</a> |
		<a href="#">ME&amp;CITY</a> |
		<a href="#">CH'IN祺</a> |
		
		<a href="#">邦购网</a>
	</div>
</body>
</html>